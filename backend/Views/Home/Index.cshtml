@{
    ViewData["Title"] = "ServConnect - Your Service Marketplace";
    var newsLocations = ViewBag.NewsLocations as string[] ?? new[] { "Kattappana", "Nedumkandam", "Kanjirappally", "Kumily", "Kuttikkanam" };
    var defaultNewsLocation = newsLocations.Length > 0 ? newsLocations[0] : "Kattappana";
}

<style>
    /* CSS Variables for consistent theming */
    :root {
        --primary: #10B981;
        --primary-dark: #059669;
        --primary-light: #34D399;
        --accent: #3B82F6;
        --gradient-primary: linear-gradient(135deg, #10B981 0%, #059669 100%);
        --gradient-hero: linear-gradient(135deg, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.2) 100%);
        --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.05);
        --shadow-md: 0 10px 25px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 25px 50px rgba(0, 0, 0, 0.15);
        --shadow-glow: 0 10px 40px rgba(16, 185, 129, 0.3);
    }

    body, html {
        margin: 0;
        padding: 0;
    }

    /* Hero Section with Enhanced Design */
    .hero-section {
        position: relative;
        color: white;
        padding: 0;
        text-align: left;
        margin: 0;
        background: url('@Url.Content("~/images/hero-bg.png")') center/cover no-repeat;
        min-height: calc(100vh - 50px);
        display: flex;
        align-items: center;
        overflow: hidden;
        width: 100%;
    }

    .hero-section:before {
        content: '';
        position: absolute;
        inset: 0;
        background: var(--gradient-hero);
    }

    /* Animated floating particles */
    .hero-particles {
        position: absolute;
        inset: 0;
        overflow: hidden;
        pointer-events: none;
    }

    .particle {
        position: absolute;
        width: 10px;
        height: 10px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        animation: float 15s infinite ease-in-out;
    }

    .particle:nth-child(1) { left: 10%; top: 20%; animation-delay: 0s; }
    .particle:nth-child(2) { left: 20%; top: 80%; animation-delay: 2s; width: 15px; height: 15px; }
    .particle:nth-child(3) { left: 60%; top: 40%; animation-delay: 4s; }
    .particle:nth-child(4) { left: 80%; top: 60%; animation-delay: 6s; width: 8px; height: 8px; }
    .particle:nth-child(5) { left: 40%; top: 10%; animation-delay: 8s; width: 12px; height: 12px; }
    .particle:nth-child(6) { left: 90%; top: 30%; animation-delay: 10s; }

    @@keyframes float {
        0%, 100% { transform: translateY(0) rotate(0deg); opacity: 0.3; }
        50% { transform: translateY(-100px) rotate(180deg); opacity: 0.8; }
    }

    .hero-section > .container-fluid { 
        position: relative; 
        z-index: 1; 
        margin: 0 auto;
        padding: 0;
    }

    /* Animated Hero Title */
    .hero-section h1 {
        font-size: 4rem;
        font-weight: 800;
        letter-spacing: -0.02em;
        margin-bottom: 24px;
        line-height: 1.1;
        animation: fadeInUp 0.8s ease-out;
    }

    .hero-section p {
        font-size: 1.25rem;
        margin-bottom: 40px;
        opacity: 1;
        font-weight: 400;
        line-height: 1.6;
        animation: fadeInUp 0.8s ease-out 0.2s both;
    }

    /* Animated highlight badge */
    .highlight-badge { 
        background: var(--gradient-primary);
        color: #fff; 
        padding: 8px 20px; 
        border-radius: 12px; 
        font-weight: 700; 
        display: inline-block;
        margin-left: 8px;
        box-shadow: var(--shadow-glow);
        animation: pulse 2s ease-in-out infinite;
    }

    @@keyframes pulse {
        0%, 100% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.4); }
        50% { box-shadow: 0 0 40px rgba(16, 185, 129, 0.6); }
    }

    /* Modern Search Container */
    .search-container {
        max-width: 100%;
        margin: 0;
        position: relative;
        animation: fadeInUp 0.8s ease-out 0.4s both;
    }

    .search-wrap {
        background: rgba(255, 255, 255, 0.98);
        border-radius: 20px;
        padding: 14px;
        display: grid;
        grid-template-columns: 180px 1fr 60px;
        gap: 12px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
        align-items: center;
        max-width: 620px;
        backdrop-filter: blur(20px);
        transition: all 0.3s ease;
    }

    .search-wrap:focus-within {
        transform: translateY(-4px);
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.25);
    }

    .search-select { 
        border: 2px solid #e5e7eb; 
        border-radius: 14px; 
        padding: 16px 20px; 
        font-weight: 600; 
        font-size: 1rem;
        background: #fff;
        transition: all 0.3s ease;
    }

    .search-select:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }

    .search-input {
        width: 100%;
        padding: 16px 20px;
        border: 2px solid #e5e7eb;
        border-radius: 14px;
        font-size: 1rem;
        background: #fff;
        transition: all 0.3s ease;
    }

    .search-input:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        outline: none;
    }

    .search-btn {
        background: var(--gradient-primary);
        border: none;
        border-radius: 14px;
        padding: 16px 20px;
        color: white;
        font-weight: 600;
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .search-btn:hover { 
        transform: scale(1.08);
        box-shadow: var(--shadow-glow);
    }

    /* Modern Category Chips with animation */
    .category-chips { 
        display: flex; 
        gap: 12px; 
        flex-wrap: wrap; 
        justify-content: flex-start; 
        margin-top: 32px;
        animation: fadeInUp 0.8s ease-out 0.6s both;
    }

    .category-chip { 
        background: rgba(255, 255, 255, 0.15); 
        color: #fff; 
        border: 1px solid rgba(255, 255, 255, 0.25); 
        padding: 14px 24px; 
        border-radius: 50px; 
        font-size: 0.95rem; 
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        backdrop-filter: blur(10px);
        position: relative;
        overflow: hidden;
    }

    .category-chip::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s ease;
    }

    .category-chip:hover::before {
        left: 100%;
    }

    .category-chip:hover { 
        background: rgba(255, 255, 255, 0.25); 
        color: #fff; 
        transform: translateY(-4px) scale(1.05);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
    }

    /* Hero advertisement container */
    .hero-ad-container {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        margin-top: 0;
    }
    
    .hero-ad-container-top {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        margin-top: 0;
        margin-bottom: 1.5rem;
        width: 100%;
        animation: fadeInDown 0.8s ease-out;
    }

    /* Modern Action Buttons Grid */
    .action-buttons {
        margin-top: 24px;
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
        width: 100%;
        max-width: 520px;
        animation: fadeInRight 0.8s ease-out 0.4s both;
    }

    .action-btn {
        background: rgba(255, 255, 255, 0.98);
        border: none;
        border-radius: 20px;
        padding: 24px 20px;
        text-decoration: none;
        color: #1f2937;
        font-weight: 600;
        font-size: 1rem;
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        display: flex;
        align-items: center;
        gap: 14px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(20px);
    }

    .action-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: var(--gradient-primary);
        transform: scaleY(0);
        transition: transform 0.3s ease;
    }

    .action-btn:hover::before {
        transform: scaleY(1);
    }

    .action-btn:hover {
        transform: translateY(-6px) translateX(4px);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        color: #1f2937;
        text-decoration: none;
    }

    .action-btn i {
        font-size: 1.5rem;
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        border-radius: 14px;
        color: var(--primary);
        transition: all 0.3s ease;
    }

    .action-btn:hover i {
        transform: scale(1.1) rotate(5deg);
        background: var(--gradient-primary);
        color: white;
    }

    /* Explore Services Button - Special Styling */
    .explore-more-btn {
        grid-column: span 2;
        background: var(--gradient-primary);
        color: white !important;
        position: relative;
        overflow: hidden;
    }

    .explore-more-btn::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
        transform: rotate(45deg);
        animation: shimmer 3s infinite;
    }

    @@keyframes shimmer {
        0% { transform: translateX(-100%) rotate(45deg); }
        100% { transform: translateX(100%) rotate(45deg); }
    }

    .explore-more-btn i {
        background: rgba(255, 255, 255, 0.2) !important;
        color: white !important;
    }

    .explore-more-btn:hover {
        transform: translateY(-6px) scale(1.02);
        box-shadow: 0 25px 60px rgba(16, 185, 129, 0.4);
        color: white !important;
    }

    .explore-more-btn:hover i {
        background: rgba(255, 255, 255, 0.3) !important;
    }

    .top-news-trigger {
        grid-column: span 2;
        background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
        color: white !important;
    }

    .top-news-trigger i {
        background: rgba(255, 255, 255, 0.2) !important;
        color: white !important;
    }

    .top-news-trigger:hover {
        color: white !important;
    }

    .top-news-trigger:hover i {
        background: rgba(255, 255, 255, 0.3) !important;
    }

    /* Animation keyframes */
    @@keyframes fadeInUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @@keyframes fadeInDown {
        from { opacity: 0; transform: translateY(-30px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @@keyframes fadeInRight {
        from { opacity: 0; transform: translateX(30px); }
        to { opacity: 1; transform: translateX(0); }
    }

    /* Staggered reveal for cards */
    .section-stagger .stagger-item { opacity: 0; transform: translateY(20px); }
    .section-stagger.revealed .stagger-item { animation: sc-fade-up 0.6s ease forwards; }
    .section-stagger.revealed .stagger-item:nth-child(1) { animation-delay: 0.1s; }
    .section-stagger.revealed .stagger-item:nth-child(2) { animation-delay: 0.2s; }
    .section-stagger.revealed .stagger-item:nth-child(3) { animation-delay: 0.3s; }
    .section-stagger.revealed .stagger-item:nth-child(4) { animation-delay: 0.4s; }

    @@keyframes sc-fade-up {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Modern Features Section */
    .features-section {
        padding: 100px 0;
        background: linear-gradient(180deg, #f8fafc 0%, #ffffff 100%);
        position: relative;
    }

    .features-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 200px;
        background: linear-gradient(180deg, rgba(248, 250, 252, 0) 0%, #f8fafc 100%);
        transform: translateY(-100%);
    }

    .feature-card {
        background: #fff;
        padding: 48px 36px;
        border-radius: 24px;
        text-align: center;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.06);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        margin-bottom: 30px;
        height: 100%;
        border: 1px solid rgba(0, 0, 0, 0.04);
        position: relative;
        overflow: hidden;
    }

    .feature-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--gradient-primary);
        transform: scaleX(0);
        transition: transform 0.4s ease;
    }

    .feature-card:hover::before {
        transform: scaleX(1);
    }

    .feature-card:hover {
        transform: translateY(-12px);
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.12);
    }

    .feature-icon {
        width: 80px;
        height: 80px;
        background: var(--gradient-primary);
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 28px;
        font-size: 2rem;
        color: white;
        box-shadow: 0 12px 30px rgba(16, 185, 129, 0.25);
        transition: all 0.4s ease;
    }

    .feature-card:hover .feature-icon {
        transform: scale(1.1) rotate(5deg);
        box-shadow: 0 15px 40px rgba(16, 185, 129, 0.35);
    }

    .feature-card h3 {
        color: #1f2937;
        margin-bottom: 16px;
        font-size: 1.5rem;
        font-weight: 700;
    }

    .feature-card p {
        color: #6b7280;
        line-height: 1.7;
        font-size: 1rem;
    }

    /* Modern Services Section */
    .services-section {
        padding: 100px 0;
        background: #fff;
    }

    .section-title {
        text-align: center;
        margin-bottom: 60px;
    }

    .section-title h2 {
        font-size: 3rem;
        color: #1f2937;
        margin-bottom: 20px;
        font-weight: 800;
        position: relative;
        display: inline-block;
    }

    .section-title h2::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background: var(--gradient-primary);
        border-radius: 2px;
    }

    .section-title p {
        font-size: 1.25rem;
        color: #6b7280;
        font-weight: 400;
        margin-top: 24px;
    }

    /* Modern Service Category Cards */
    .service-category {
        background: #fff;
        border-radius: 24px;
        padding: 44px 32px;
        text-align: center;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.06);
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        margin-bottom: 30px;
        cursor: pointer;
        border: 1px solid rgba(0, 0, 0, 0.04);
        position: relative;
        overflow: hidden;
    }

    .service-category::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: currentColor;
        opacity: 0.8;
    }

    .service-category:hover {
        transform: translateY(-12px) scale(1.02);
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.12);
    }

    .service-category.home-services { color: #10B981; }
    .service-category.home-services::before { background: linear-gradient(90deg, #10B981, #34D399); }

    .service-category.tech-services { color: #3B82F6; }
    .service-category.tech-services::before { background: linear-gradient(90deg, #3B82F6, #60A5FA); }

    .service-category.beauty-services { color: #EC4899; }
    .service-category.beauty-services::before { background: linear-gradient(90deg, #EC4899, #F472B6); }

    .service-category.business-services { color: #F59E0B; }
    .service-category.business-services::before { background: linear-gradient(90deg, #F59E0B, #FBBF24); }

    .service-icon {
        font-size: 3.5rem;
        margin-bottom: 24px;
        transition: all 0.4s ease;
    }

    .service-category:hover .service-icon {
        transform: scale(1.15) rotate(5deg);
    }

    .service-category a,
    a .service-category {
        color: inherit;
        text-decoration: none;
    }

    .service-category h4 {
        color: #1f2937;
        margin-bottom: 14px;
        font-size: 1.4rem;
        font-weight: 700;
    }

    .service-category p {
        color: #6b7280;
        margin-bottom: 24px;
        font-size: 1rem;
        line-height: 1.6;
    }

    .service-count {
        background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
        padding: 10px 20px;
        border-radius: 50px;
        font-size: 0.9rem;
        color: #059669;
        display: inline-block;
        font-weight: 600;
        transition: all 0.3s ease;
    }

    .service-category:hover .service-count {
        background: var(--gradient-primary);
        color: white;
        transform: translateY(-2px);
    }

    /* Modern CTA Section */
    .cta-section {
        background: linear-gradient(135deg, #064e3b 0%, #065f46 50%, #047857 100%);
        color: white;
        padding: 100px 0;
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .cta-section::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
        animation: rotate 30s linear infinite;
    }

    @@keyframes rotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    .cta-section h2 {
        font-size: 3rem;
        margin-bottom: 24px;
        font-weight: 800;
        position: relative;
    }

    .cta-section p {
        font-size: 1.25rem;
        margin-bottom: 48px;
        opacity: 0.9;
        font-weight: 400;
        position: relative;
    }

    .cta-buttons {
        display: flex;
        gap: 20px;
        justify-content: center;
        flex-wrap: wrap;
        position: relative;
    }

    .cta-btn {
        padding: 18px 36px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 14px;
        color: white;
        background: rgba(255, 255, 255, 0.1);
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        display: inline-flex;
        align-items: center;
        gap: 12px;
        font-size: 1rem;
        backdrop-filter: blur(10px);
    }

    .cta-btn:hover {
        background: white;
        color: #047857;
        text-decoration: none;
        transform: translateY(-4px) scale(1.05);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    }

    /* Modern Stats Section */
    .stats-section {
        padding: 100px 0;
        background: linear-gradient(180deg, #f8fafc 0%, #ffffff 100%);
    }

    .stat-item {
        text-align: center;
        margin-bottom: 30px;
        padding: 30px;
        background: white;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.06);
        transition: all 0.4s ease;
    }

    .stat-item:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.1);
    }

    .stat-number {
        font-size: 3.5rem;
        font-weight: 800;
        background: var(--gradient-primary);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 12px;
    }

    .stat-label {
        color: #6b7280;
        font-size: 1rem;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-weight: 600;
    }

    /* Responsive Design */
    @@media (max-width: 768px) {
        .hero-section h1 {
            font-size: 2.5rem;
        }

        .hero-section p {
            font-size: 1.1rem;
        }

        .hero-ad-container,
        .hero-ad-container-top {
            margin-bottom: 20px;
        }

        .action-buttons {
            margin-top: 20px;
            grid-template-columns: 1fr;
        }

        .top-news-trigger,
        .explore-more-btn {
            grid-column: span 1;
        }

        .section-title h2 {
            font-size: 2.25rem;
        }
    }

    @@media (max-width: 991px) {
        .hero-ad-container,
        .hero-ad-container-top {
            margin-bottom: 30px;
        }
    }

    @@media (max-width: 576px) {
        .search-wrap {
            grid-template-columns: 1fr;
            gap: 12px;
            border-radius: 16px;
        }

        .search-select, .search-input, .search-btn {
            padding: 14px 16px;
        }

        .cta-buttons {
            flex-direction: column;
            align-items: center;
        }

        .section-title h2 {
            font-size: 2rem;
        }

        .category-chips {
            gap: 8px;
        }

        .category-chip {
            padding: 10px 18px;
            font-size: 0.9rem;
        }
    }
</style>

<!-- Hero Section -->
<div class="hero-section">
    <!-- Animated floating particles -->
    <div class="hero-particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>
    <div class="container-fluid">
        <div class="row min-vh-100 mx-0">
            <div class="col-lg-6 d-flex flex-column justify-content-center">
                <p class="mb-3 text-white-50">Order any service, anytime from anywhere</p>
                <h1 class="text-white mb-4">Find the Perfect <span class="highlight-badge">Service</span> for Your Needs</h1>
                <p class="text-white-50 mb-5">Connect with trusted service providers and vendors in your area. Get quality services delivered right to your doorstep.</p>

                <div class="search-container">
                    <div class="search-wrap">
                        <select class="form-select search-select" id="searchLocation">
                            @for (var i = 0; i < newsLocations.Length; i++)
                            {
                                var place = newsLocations[i];
                                if (i == 0)
                                {
                                    <option value="@place" selected>@place</option>
                                }
                                else
                                {
                                    <option value="@place">@place</option>
                                }
                            }
                        </select>
                        <input class="search-input" id="searchInput" placeholder="What are you looking for?" />
                        <button class="search-btn" id="searchBtn"><i class="bi bi-search"></i></button>
                        
                        <style>
                            .hero-results { margin-top:16px; }
                            .service-card { border:1px solid #e5e7eb; border-radius:12px; padding:12px 16px; background:#fff; margin-bottom:10px; display:flex; justify-content:space-between; align-items:center; }
                            .service-title { font-weight:600; }
                            .service-meta { font-size:.9rem; color:#6b7280; }
                        </style>
                    </div>
                </div>
                <style>
                    .osm-quick-cards { margin-top: 14px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
                    .osm-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 10px 12px; cursor: pointer; display:flex; align-items:center; gap:8px; transition: transform .1s ease, box-shadow .1s ease; }
                    .osm-card:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,.08); }
                    .osm-card i { color:#0ea5e9; }
                    @@media (max-width: 768px){ .osm-quick-cards{ grid-template-columns: repeat(2, 1fr);} }
                </style>
                <!-- Moved OSM quick cards into LocalDirectory/Discover search; removing from hero -->
                <div class="osm-quick-cards d-none"></div>

                <div class="category-chips">
                    @if (User.Identity?.IsAuthenticated ?? false)
                    {
                        <a href="/Services/Browse?q=Plumber" class="category-chip">@Localizer["Category.Plumber"]</a>
                        <a href="/Services/Browse?q=Electrician" class="category-chip">@Localizer["Category.Electrician"]</a>
                        <a href="/Services/Browse?q=Cleaner" class="category-chip">@Localizer["Category.Cleaner"]</a>
                        <a href="/Services/Browse?q=Painting" class="category-chip">@Localizer["Category.Painting"]</a>
                        <a href="/Services/Browse?q=Salon" class="category-chip">@Localizer["Category.Salon"]</a>
                        <a href="/Services/Browse" class="category-chip">@Localizer["Category.More"]</a>
                    }
                    else
                    {
                        <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="/Services/Browse?q=Plumber" class="category-chip">@Localizer["Category.Plumber"]</a>
                        <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="/Services/Browse?q=Electrician" class="category-chip">@Localizer["Category.Electrician"]</a>
                        <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="/Services/Browse?q=Cleaner" class="category-chip">@Localizer["Category.Cleaner"]</a>
                        <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="/Services/Browse?q=Painting" class="category-chip">@Localizer["Category.Painting"]</a>
                        <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="/Services/Browse?q=Salon" class="category-chip">@Localizer["Category.Salon"]</a>
                        <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="/Services/Browse" class="category-chip">@Localizer["Category.More"]</a>
                    }
                </div>
            </div>
            <div class="col-lg-6 d-flex flex-column justify-content-start align-items-center">
                <!-- Hero Advertisement Banner -->
                <div class="hero-ad-container-top mb-4">
                    @await Component.InvokeAsync("HeroAdvertisement")
                </div>
                
                <!-- Spacer to push action buttons to center -->
                <div class="flex-grow-1 d-flex align-items-center">
                    <div class="action-buttons">
                        <a href="/Home/News" class="action-btn top-news-trigger">
                            <i class="fas fa-newspaper"></i>
                            <div>
                                <div class="fw-bold">Top News</div>
                                <small>Stay updated with your city</small>
                            </div>
                        </a>
                        <!-- New Explore More Services Button -->
                        <a href="/Home/ExploreServices" class="action-btn explore-more-btn">
                            <i class="fas fa-compass"></i>
                            <div>
                                <div class="fw-bold">Explore More Services</div>
                                <small>Discover all available services</small>
                            </div>
                        </a>
                    @if (User.Identity?.IsAuthenticated ?? false)
                    {
                        <a href="/Services/Browse" class="action-btn">
                            <i class="fas fa-calendar-check"></i>
                            <div>
                                <div class="fw-bold">@Localizer["CTA.BookService.Title"]</div>
                                <small class="text-muted">@Localizer["CTA.BookService.Desc"]</small>
                            </div>
                        </a>
                        <a href="/LocalDirectory/Discover" class="action-btn">
                            <i class="fas fa-search-location"></i>
                            <div>
                                <div class="fw-bold">@Localizer["CTA.SearchLocal.Title"]</div>
                                <small class="text-muted">@Localizer["CTA.SearchLocal.Desc"]</small>
                            </div>
                        </a>
                    }
                    else
                    {
                        <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="/Services/Browse" class="action-btn">
                            <i class="fas fa-calendar-check"></i>
                            <div>
                                <div class="fw-bold">@Localizer["CTA.BookService.Title"]</div>
                                <small class="text-muted">@Localizer["CTA.BookService.Desc"]</small>
                            </div>
                        </a>
                        <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="/LocalDirectory/Discover" class="action-btn">
                            <i class="fas fa-search-location"></i>
                            <div>
                                <div class="fw-bold">@Localizer["CTA.SearchLocal.Title"]</div>
                                <small class="text-muted">@Localizer["CTA.SearchLocal.Desc"]</small>
                            </div>
                        </a>
                    }
                    @if (User.Identity?.IsAuthenticated ?? false)
                    {
                        <a href="/Home/Items?role=Vendor" class="action-btn">
                            <i class="fas fa-store"></i>
                            <div>
                                <div class="fw-bold">@Localizer["CTA.VendorItems.Title"]</div>
                                <small class="text-muted">@Localizer["CTA.VendorItems.Desc"]</small>
                            </div>
                        </a>
                    }
                    else
                    {
                        <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="/Home/Items?role=Vendor" class="action-btn">
                            <i class="fas fa-store"></i>
                            <div>
                                <div class="fw-bold">@Localizer["CTA.VendorItems.Title"]</div>
                                <small class="text-muted">@Localizer["CTA.VendorItems.Desc"]</small>
                            </div>
                        </a>
                    }
                    <a href="#" class="action-btn" onclick="alert('@Localizer["Msg.NoResults"]');return false;">
                        <i class="fas fa-sync-alt"></i>
                        <div>
                            <div class="fw-bold">@Localizer["CTA.DailyEssentials.Title"]</div>
                            <small class="text-muted">@Localizer["CTA.DailyEssentials.Desc"]</small>
                        </div>
                    </a>
                </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Hero search: fetch from local directory API with location
    async function runHeroSearch(){
        const loc = document.getElementById('searchLocation').value;
        const q = (document.getElementById('searchInput').value || '').trim();
        const url = new URL(location.origin + '/api/local/services');
        if(q) url.searchParams.set('q', q);
        url.searchParams.set('locationName', loc);
        try{
            const res = await fetch(url);
            const list = await res.json();
            const containerId = 'heroResults';
            let container = document.getElementById(containerId);
            if(!container){
                container = document.createElement('div');
                container.id = containerId;
                container.className = 'hero-results';
                document.querySelector('.search-container').appendChild(container);
            }
            if(!Array.isArray(list) || list.length === 0){
                container.innerHTML = '<div class="text-white-50 mt-3">No results found.</div>';
                return;
            }
            list.sort((a,b)=> (b.rating||0)-(a.rating||0));
            container.innerHTML = list.map(s => {
                const stars = (s.rating||0) > 0 ? `<span class="badge bg-warning text-dark ms-2"><i class="fas fa-star"></i> ${Number(s.rating).toFixed(1)}${s.ratingCount?` (${s.ratingCount})`:''}</span>` : '';
                const addr = s.address ? `<div class="service-meta">${s.address}</div>` : '';
                const mapHref = s.mapUrl ? s.mapUrl : `/local/services/${s.id}/map`;
                const rate = `<div class="mt-2">
                    <span class="me-2">Rate:</span>
                    ${[1,2,3,4,5].map(n=>`<button class='btn btn-sm ${n<=Math.round(s.rating)?'btn-warning':'btn-outline-secondary'} me-1' onclick='rateService(${JSON.stringify(s.id)}, ${n})'>${n}</button>`).join('')}
                </div>`;
                return `<div class="service-card">
                    <div>
                        <div class="service-title">${s.name} ${stars}</div>
                        <div class="service-meta">${s.categoryName||''}</div>
                        ${addr}
                        ${rate}
                    </div>
                    <a class="btn btn-sm btn-outline-success" target="_blank" href="${mapHref}"><i class="fas fa-map-marker-alt"></i> Map</a>
                </div>`;
            }).join('');
        }catch{
            alert('Failed to load results');
        }
    }
    async function rateService(id, rating){
        try{
            const res = await fetch(`/api/local/services/${id}/rating`, {
                method: 'POST', headers: {'Content-Type':'application/json'}, body: JSON.stringify({rating})
            });
            if(res.ok){
                runHeroSearch();
            }else if(res.status === 401){
                alert('Please login to rate');
            }else{
                alert('Failed to submit rating');
            }
        }catch{
            alert('Failed to submit rating');
        }
    }
    function quickSearch(name){
        const input = document.getElementById('searchInput');
        input.value = name;
        runHeroSearch();
    }
    
    document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('searchBtn').addEventListener('click', (e)=>{ e.preventDefault(); runHeroSearch(); });
        document.getElementById('searchInput').addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); runHeroSearch(); }});
    });
</script>

<!-- Features Section -->
<div class="features-section reveal section-stagger">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-4 stagger-item">
                <div class="feature-card card-hover">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Trusted Providers</h3>
                    <p>All service providers are verified and rated by real customers to ensure quality and reliability.</p>
                </div>
            </div>
            
            <div class="col-md-4 stagger-item">
                <div class="feature-card card-hover">
                    <div class="feature-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3>Quick Booking</h3>
                    <p>Book services instantly with our easy-to-use platform. Get confirmed appointments in minutes.</p>
                </div>
            </div>
            
            <div class="col-md-4 stagger-item">
                <div class="feature-card card-hover">
                    <div class="feature-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <h3>Best Prices</h3>
                    <p>Compare prices from multiple providers and choose the best deal that fits your budget.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Services Section -->
<div class="services-section reveal section-stagger">
    <div class="container-fluid">
        <div class="section-title">
            <h2>What You Can Do on ServConnect</h2>
            <p>Explore our comprehensive platform features</p>
        </div>
        
        <div class="row">
            <div class="col-md-6 col-lg-3 stagger-item">
                @if (User.Identity?.IsAuthenticated ?? false)
                {
                    <a href="/Services/Browse" class="text-decoration-none">
                        <div class="service-category home-services card-hover">
                            <div class="service-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <h4>Service Booking</h4>
                            <p>Find and book trusted service providers</p>
                            <span class="service-count">Quick & Easy</span>
                        </div>
                    </a>
                }
                else
                {
                    <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="/Services/Browse" class="text-decoration-none">
                        <div class="service-category home-services card-hover">
                            <div class="service-icon">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <h4>Service Booking</h4>
                            <p>Find and book trusted service providers</p>
                            <span class="service-count">Quick & Easy</span>
                        </div>
                    </a>
                }
            </div>
            
            <div class="col-md-6 col-lg-3 stagger-item">
                @if (User.Identity?.IsAuthenticated ?? false)
                {
                    <a href="/LocalDirectory/Discover" class="text-decoration-none">
                        <div class="service-category tech-services card-hover">
                            <div class="service-icon">
                                <i class="fas fa-search-location"></i>
                            </div>
                            <h4>Discover Local Service</h4>
                            <p>Find local businesses and services near you</p>
                            <span class="service-count">Location-Based</span>
                        </div>
                    </a>
                }
                else
                {
                    <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="/LocalDirectory/Discover" class="text-decoration-none">
                        <div class="service-category tech-services card-hover">
                            <div class="service-icon">
                                <i class="fas fa-search-location"></i>
                            </div>
                            <h4>Discover Local Service</h4>
                            <p>Find local businesses and services near you</p>
                            <span class="service-count">Location-Based</span>
                        </div>
                    </a>
                }
            </div>
            
            <div class="col-md-6 col-lg-3 stagger-item">
                @if (User.Identity?.IsAuthenticated ?? false)
                {
                    <a href="/Home/Items" class="text-decoration-none">
                        <div class="service-category beauty-services card-hover">
                            <div class="service-icon">
                                <i class="fas fa-store"></i>
                            </div>
                            <h4>Shop Items</h4>
                            <p>Browse and purchase items from vendors</p>
                            <span class="service-count">Marketplace</span>
                        </div>
                    </a>
                }
                else
                {
                    <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="/Home/Items" class="text-decoration-none">
                        <div class="service-category beauty-services card-hover">
                            <div class="service-icon">
                                <i class="fas fa-store"></i>
                            </div>
                            <h4>Shop Items</h4>
                            <p>Browse and purchase items from vendors</p>
                            <span class="service-count">Marketplace</span>
                        </div>
                    </a>
                }
            </div>
            
            <div class="col-md-6 col-lg-3 stagger-item">
                <div class="service-category business-services card-hover" onclick="alert('Daily essentials subscription feature coming soon!')">
                    <div class="service-icon">
                        <i class="fas fa-sync-alt"></i>
                    </div>
                    <h4>Daily Essential Subscriptions</h4>
                    <p>Subscribe to daily essentials delivery</p>
                    <span class="service-count">Coming Soon</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Stats Section -->
<div class="stats-section reveal">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3 col-sm-6">
                <div class="stat-item">
                    <div class="stat-number">@(ViewBag.TotalUsers > 0 ? ViewBag.TotalUsers.ToString("N0") + "+" : "0")</div>
                    <div class="stat-label">Happy Customers</div>
                </div>
            </div>
            
            <div class="col-md-3 col-sm-6">
                <div class="stat-item">
                    <div class="stat-number">@(ViewBag.ServiceProviders > 0 ? ViewBag.ServiceProviders.ToString() + "+" : "0")</div>
                    <div class="stat-label">Service Providers</div>
                </div>
            </div>
            
            <div class="col-md-3 col-sm-6">
                <div class="stat-item">
                    <div class="stat-number">@(ViewBag.CompletedServices > 0 ? ViewBag.CompletedServices.ToString("N0") + "+" : "0")</div>
                    <div class="stat-label">Services Completed</div>
                </div>
            </div>
            
            <div class="col-md-3 col-sm-6">
                <div class="stat-item">
                    <div class="stat-number">@ViewBag.AverageRating</div>
                    <div class="stat-label">Average Rating</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- CTA Section -->
<div class="cta-section">
    <div class="container-fluid">
        <h2>Ready to Get Started?</h2>
        <p>Join thousands of satisfied customers and service providers</p>
        
        <div class="cta-buttons">
            @if (User.Identity.IsAuthenticated)
            {
                <a href="/Advertisements/Submit" class="cta-btn">
                    <i class="fas fa-bullhorn"></i>
                    Publish Advertisement
                </a>
                <a href="/Advertisements/My" class="cta-btn">
                    <i class="fas fa-rectangle-list"></i>
                    My Advertisements
                </a>
                <a href="/Account/Profile" class="cta-btn">
                    <i class="fas fa-user"></i>
                    My Account
                </a>
                <a href="/Complaints/Create?role=User" class="cta-btn">
                    <i class="fas fa-flag"></i>
                    Raise Complaint
                </a>
            }
            else
            {
                <!-- Unauthenticated: gate complaint link to login -->
                <a href="/Account/Register" class="cta-btn">
                    <i class="fas fa-user-plus"></i>
                    Sign Up Now
                </a>
                <a href="/Account/Login" class="cta-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    Login
                </a>
                <a asp-controller="Account" asp-action="Login" asp-route-returnUrl="/Complaints/Create?role=User" class="cta-btn">
                    <i class="fas fa-flag"></i>
                    Raise Complaint
                </a>
            }
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Animate stats on scroll
        const observerOptions = {
            threshold: 0.5,
            rootMargin: '0px 0px -100px 0px'
        };
        
        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const statNumbers = entry.target.querySelectorAll('.stat-number');
                    statNumbers.forEach(stat => {
                        const text = stat.textContent;
                        const hasPlus = text.includes('+');
                        const isDecimal = text.includes('.');
                        
                        if (isDecimal) {
                            // Handle decimal numbers like 4.8
                            const finalNumber = parseFloat(text);
                            let currentNumber = 0;
                            const increment = finalNumber / 30;
                            
                            const timer = setInterval(() => {
                                currentNumber += increment;
                                if (currentNumber >= finalNumber) {
                                    stat.textContent = finalNumber.toFixed(1);
                                    clearInterval(timer);
                                } else {
                                    stat.textContent = currentNumber.toFixed(1);
                                }
                            }, 50);
                        } else {
                            // Handle regular numbers
                            const finalNumber = parseInt(text.replace(/[^0-9]/g, ''));
                            let currentNumber = 0;
                            const increment = finalNumber / 50;
                            
                            const timer = setInterval(() => {
                                currentNumber += increment;
                                if (currentNumber >= finalNumber) {
                                    stat.textContent = finalNumber.toLocaleString() + (hasPlus ? '+' : '');
                                    clearInterval(timer);
                                } else {
                                    stat.textContent = Math.floor(currentNumber).toLocaleString() + (hasPlus ? '+' : '');
                                }
                            }, 30);
                        }
                    });
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);
        
        const revealSections = document.querySelectorAll('.reveal');
        revealSections.forEach(sec => {
            const obs = new IntersectionObserver((entries) => {
                entries.forEach(e => {
                    if (e.isIntersecting) {
                        e.target.classList.add('revealed');
                        obs.unobserve(e.target);
                    }
                });
            }, {threshold: 0.15});
            obs.observe(sec);
        });
        
        // Search functionality - route to Browse like the reference, but require login if unauthenticated
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchBtn');
        
        searchBtn.addEventListener('click', function() {
            const query = searchInput.value.trim();
            if (!query) return;
            sessionStorage.setItem('browse_q', query);
            const isAuthed = document.body.getAttribute('data-authed') === 'true';
            if (isAuthed) {
                window.location.href = '/Services/Browse';
            } else {
                // redirect to login, then back to browse
                window.location.href = '/Account/Login?returnUrl=' + encodeURIComponent('/Services/Browse');
            }
        });
        
        searchInput?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchBtn.click();
            }
        });
    });
</script>