// Community Platform Translation System
// Supports English (en) and Malayalam (ml)

const CommunityTranslations = {
    ml: {
        // Navigation
        'Feed': 'ഫീഡ്',
        'Discover': 'കണ്ടെത്തുക',
        'Messages': 'സന്ദേശങ്ങൾ',
        'Notifications': 'അറിയിപ്പുകൾ',
        'Profile': 'പ്രൊഫൈൽ',
        'Settings': 'ക്രമീകരണങ്ങൾ',
        'Community': 'കമ്മ്യൂണിറ്റി',
        'Alerts': 'അലേർട്ടുകൾ',
        
        // Feed page
        "What's on your mind?": 'നിങ്ങളുടെ മനസ്സിൽ എന്താണ്?',
        'Photo': 'ഫോട്ടോ',
        'Video': 'വീഡിയോ',
        'Create Post': 'പോസ്റ്റ് സൃഷ്ടിക്കുക',
        'Post': 'പോസ്റ്റ്',
        'Loading posts...': 'പോസ്റ്റുകൾ ലോഡ് ചെയ്യുന്നു...',
        'Your feed is empty': 'നിങ്ങളുടെ ഫീഡ് ശൂന്യമാണ്',
        'Follow some users or create your first post to get started!': 'ആരംഭിക്കാൻ ചില ഉപയോക്താക്കളെ ഫോളോ ചെയ്യുക അല്ലെങ്കിൽ നിങ്ങളുടെ ആദ്യ പോസ്റ്റ് സൃഷ്ടിക്കുക!',
        'Load More': 'കൂടുതൽ ലോഡ് ചെയ്യുക',
        'Suggested for you': 'നിങ്ങൾക്കായി നിർദ്ദേശിച്ചത്',
        'Trending': 'ട്രെൻഡിംഗ്',
        'posts': 'പോസ്റ്റുകൾ',
        
        // Post interactions
        'Like': 'ലൈക്ക്',
        'Comment': 'കമന്റ്',
        'Share': 'ഷെയർ',
        'Edit': 'എഡിറ്റ്',
        'Delete': 'ഇല്ലാതാക്കുക',
        'Report': 'റിപ്പോർട്ട്',
        'Copy Link': 'ലിങ്ക് കോപ്പി ചെയ്യുക',
        'likes': 'ലൈക്കുകൾ',
        'comments': 'കമന്റുകൾ',
        'Reply': 'മറുപടി',
        'View replies': 'മറുപടികൾ കാണുക',
        'Write a comment...': 'ഒരു കമന്റ് എഴുതുക...',
        
        // Create post modal
        'Add photos or videos': 'ഫോട്ടോകളോ വീഡിയോകളോ ചേർക്കുക',
        'Drag and drop or click to upload': 'അപ്‌ലോഡ് ചെയ്യാൻ വലിച്ചിടുക അല്ലെങ്കിൽ ക്ലിക്ക് ചെയ്യുക',
        'Add hashtags (e.g., technology, community)': 'ഹാഷ്‌ടാഗുകൾ ചേർക്കുക (ഉദാ: technology, community)',
        'Public': 'പൊതു',
        'Followers only': 'ഫോളോവേഴ്സ് മാത്രം',
        'Private': 'സ്വകാര്യം',
        
        // Profile page
        'Posts': 'പോസ്റ്റുകൾ',
        'Followers': 'ഫോളോവേഴ്സ്',
        'Following': 'ഫോളോയിംഗ്',
        'Follow': 'ഫോളോ',
        'Unfollow': 'അൺഫോളോ',
        'Edit Profile': 'പ്രൊഫൈൽ എഡിറ്റ് ചെയ്യുക',
        'Block': 'ബ്ലോക്ക്',
        'Mute': 'മ്യൂട്ട്',
        'Media': 'മീഡിയ',
        'Liked': 'ലൈക്ക് ചെയ്തത്',
        
        // Messages page
        'New Message': 'പുതിയ സന്ദേശം',
        'Search conversations...': 'സംഭാഷണങ്ങൾ തിരയുക...',
        'No conversations yet': 'ഇതുവരെ സംഭാഷണങ്ങളില്ല',
        'Start a conversation by messaging someone': 'ആരെയെങ്കിലും സന്ദേശമയച്ച് ഒരു സംഭാഷണം ആരംഭിക്കുക',
        'Select a conversation': 'ഒരു സംഭാഷണം തിരഞ്ഞെടുക്കുക',
        'Choose a conversation from the list to start chatting': 'ചാറ്റിംഗ് ആരംഭിക്കാൻ ലിസ്റ്റിൽ നിന്ന് ഒരു സംഭാഷണം തിരഞ്ഞെടുക്കുക',
        'Type a message...': 'ഒരു സന്ദേശം ടൈപ്പ് ചെയ്യുക...',
        'Online': 'ഓൺലൈൻ',
        'Offline': 'ഓഫ്‌ലൈൻ',
        
        // Notifications page
        'Mark all as read': 'എല്ലാം വായിച്ചതായി അടയാളപ്പെടുത്തുക',
        'All': 'എല്ലാം',
        'Likes': 'ലൈക്കുകൾ',
        'Comments': 'കമന്റുകൾ',
        'Follows': 'ഫോളോകൾ',
        'No notifications yet': 'ഇതുവരെ അറിയിപ്പുകളില്ല',
        'When someone interacts with your posts, you\'ll see it here': 'ആരെങ്കിലും നിങ്ങളുടെ പോസ്റ്റുകളുമായി ഇടപഴകുമ്പോൾ, നിങ്ങൾ ഇവിടെ കാണും',
        'Today': 'ഇന്ന്',
        'This Week': 'ഈ ആഴ്ച',
        'This Month': 'ഈ മാസം',
        'Earlier': 'മുമ്പ്',
        'liked your post': 'നിങ്ങളുടെ പോസ്റ്റ് ലൈക്ക് ചെയ്തു',
        'liked your comment': 'നിങ്ങളുടെ കമന്റ് ലൈക്ക് ചെയ്തു',
        'commented on your post': 'നിങ്ങളുടെ പോസ്റ്റിൽ കമന്റ് ചെയ്തു',
        'replied to your comment': 'നിങ്ങളുടെ കമന്റിന് മറുപടി നൽകി',
        'started following you': 'നിങ്ങളെ ഫോളോ ചെയ്യാൻ തുടങ്ങി',
        'sent you a message': 'നിങ്ങൾക്ക് ഒരു സന്ദേശം അയച്ചു',
        'mentioned you': 'നിങ്ങളെ പരാമർശിച്ചു',
        'shared your post': 'നിങ്ങളുടെ പോസ്റ്റ് ഷെയർ ചെയ്തു',
        
        // Search/Discover page
        'Search': 'തിരയുക',
        'Search users, posts, hashtags...': 'ഉപയോക്താക്കൾ, പോസ്റ്റുകൾ, ഹാഷ്‌ടാഗുകൾ തിരയുക...',
        'Users': 'ഉപയോക്താക്കൾ',
        'Hashtags': 'ഹാഷ്‌ടാഗുകൾ',
        'Suggested Users': 'നിർദ്ദേശിച്ച ഉപയോക്താക്കൾ',
        'Trending Hashtags': 'ട്രെൻഡിംഗ് ഹാഷ്‌ടാഗുകൾ',
        'Recent Searches': 'സമീപകാല തിരയലുകൾ',
        'No results found': 'ഫലങ്ങളൊന്നും കണ്ടെത്തിയില്ല',
        
        // Settings page
        'Privacy': 'സ്വകാര്യത',
        'Appearance': 'രൂപം',
        'Account': 'അക്കൗണ്ട്',
        'Blocked Users': 'ബ്ലോക്ക് ചെയ്ത ഉപയോക്താക്കൾ',
        'Username': 'ഉപയോക്തൃനാമം',
        'Bio': 'ബയോ',
        'Website': 'വെബ്സൈറ്റ്',
        'Location': 'സ്ഥലം',
        'Change Photo': 'ഫോട്ടോ മാറ്റുക',
        'Save Changes': 'മാറ്റങ്ങൾ സേവ് ചെയ്യുക',
        'Privacy Settings': 'സ്വകാര്യതാ ക്രമീകരണങ്ങൾ',
        'Private Account': 'സ്വകാര്യ അക്കൗണ്ട്',
        'Only approved followers can see your posts': 'അംഗീകൃത ഫോളോവേഴ്സിന് മാത്രമേ നിങ്ങളുടെ പോസ്റ്റുകൾ കാണാൻ കഴിയൂ',
        'Allow Messages': 'സന്ദേശങ്ങൾ അനുവദിക്കുക',
        'Allow anyone to send you direct messages': 'ആർക്കും നിങ്ങൾക്ക് നേരിട്ട് സന്ദേശങ്ങൾ അയയ്ക്കാൻ അനുവദിക്കുക',
        'Show Activity Status': 'പ്രവർത്തന നില കാണിക്കുക',
        'Let others see when you were last active': 'നിങ്ങൾ അവസാനം സജീവമായിരുന്നപ്പോൾ മറ്റുള്ളവർക്ക് കാണാൻ അനുവദിക്കുക',
        'Notification Preferences': 'അറിയിപ്പ് മുൻഗണനകൾ',
        'Push Notifications': 'പുഷ് അറിയിപ്പുകൾ',
        'Receive push notifications for activity': 'പ്രവർത്തനത്തിനായി പുഷ് അറിയിപ്പുകൾ സ്വീകരിക്കുക',
        'Like Notifications': 'ലൈക്ക് അറിയിപ്പുകൾ',
        'When someone likes your post or comment': 'ആരെങ്കിലും നിങ്ങളുടെ പോസ്റ്റോ കമന്റോ ലൈക്ക് ചെയ്യുമ്പോൾ',
        'Comment Notifications': 'കമന്റ് അറിയിപ്പുകൾ',
        'When someone comments on your post': 'ആരെങ്കിലും നിങ്ങളുടെ പോസ്റ്റിൽ കമന്റ് ചെയ്യുമ്പോൾ',
        'Follow Notifications': 'ഫോളോ അറിയിപ്പുകൾ',
        'When someone follows you': 'ആരെങ്കിലും നിങ്ങളെ ഫോളോ ചെയ്യുമ്പോൾ',
        'Message Notifications': 'സന്ദേശ അറിയിപ്പുകൾ',
        'When you receive a new message': 'നിങ്ങൾക്ക് ഒരു പുതിയ സന്ദേശം ലഭിക്കുമ്പോൾ',
        'Theme': 'തീം',
        'Light': 'ലൈറ്റ്',
        'Dark': 'ഡാർക്ക്',
        'System': 'സിസ്റ്റം',
        'Language': 'ഭാഷ',
        'Account Settings': 'അക്കൗണ്ട് ക്രമീകരണങ്ങൾ',
        'Email': 'ഇമെയിൽ',
        'Member Since': 'അംഗമായത്',
        'Danger Zone': 'അപകട മേഖല',
        'These actions are irreversible. Please proceed with caution.': 'ഈ പ്രവർത്തനങ്ങൾ മാറ്റാനാവാത്തവയാണ്. ദയവായി ശ്രദ്ധയോടെ മുന്നോട്ട് പോകുക.',
        'Deactivate Account': 'അക്കൗണ്ട് നിർജ്ജീവമാക്കുക',
        'Delete Account': 'അക്കൗണ്ട് ഇല്ലാതാക്കുക',
        "You haven't blocked anyone": 'നിങ്ങൾ ആരെയും ബ്ലോക്ക് ചെയ്തിട്ടില്ല',
        "Users you've blocked can't see your posts, message you, or find your profile.": 'നിങ്ങൾ ബ്ലോക്ക് ചെയ്ത ഉപയോക്താക്കൾക്ക് നിങ്ങളുടെ പോസ്റ്റുകൾ കാണാനോ സന്ദേശമയയ്ക്കാനോ പ്രൊഫൈൽ കണ്ടെത്താനോ കഴിയില്ല.',
        'Unblock': 'അൺബ്ലോക്ക്',
        
        // Report modal
        'Report Content': 'ഉള്ളടക്കം റിപ്പോർട്ട് ചെയ്യുക',
        'Why are you reporting this?': 'നിങ്ങൾ ഇത് എന്തുകൊണ്ട് റിപ്പോർട്ട് ചെയ്യുന്നു?',
        'Spam': 'സ്പാം',
        'Harassment or bullying': 'ഉപദ്രവം അല്ലെങ്കിൽ ഭീഷണി',
        'Hate speech': 'വിദ്വേഷ പ്രസംഗം',
        'Violence or threats': 'അക്രമം അല്ലെങ്കിൽ ഭീഷണികൾ',
        'Nudity or sexual content': 'നഗ്നത അല്ലെങ്കിൽ ലൈംഗിക ഉള്ളടക്കം',
        'False information': 'തെറ്റായ വിവരങ്ങൾ',
        'Scam or fraud': 'തട്ടിപ്പ് അല്ലെങ്കിൽ വഞ്ചന',
        'Other': 'മറ്റുള്ളവ',
        'Additional details (optional)': 'അധിക വിശദാംശങ്ങൾ (ഓപ്ഷണൽ)',
        'Submit Report': 'റിപ്പോർട്ട് സമർപ്പിക്കുക',
        
        // Common
        'Cancel': 'റദ്ദാക്കുക',
        'Submit': 'സമർപ്പിക്കുക',
        'Save': 'സേവ്',
        'Close': 'അടയ്ക്കുക',
        'Loading...': 'ലോഡ് ചെയ്യുന്നു...',
        'Error': 'പിശക്',
        'Success': 'വിജയം',
        'Confirm': 'സ്ഥിരീകരിക്കുക',
        'Yes': 'അതെ',
        'No': 'ഇല്ല',
        
        // Time
        'Just now': 'ഇപ്പോൾ',
        'm ago': 'മി. മുമ്പ്',
        'h ago': 'മ. മുമ്പ്',
        'd ago': 'ദി. മുമ്പ്',
        
        // Footer
        'Privacy': 'സ്വകാര്യത',
        'Terms': 'നിബന്ധനകൾ',
        'Help': 'സഹായം'
    }
};

// Apply translations to the page
function applyTranslations(lang) {
    if (!lang || lang === 'en') return;
    
    const trans = CommunityTranslations[lang];
    if (!trans) return;
    
    // Translate navigation links
    document.querySelectorAll('.nav-link span, .mobile-nav-item span').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate headings
    document.querySelectorAll('h1, h2, h3, h4, .section-title, .sidebar-card-title, .group-title').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate buttons
    document.querySelectorAll('button, .btn').forEach(el => {
        // Check for span inside button first
        const span = el.querySelector('span');
        if (span) {
            const text = span.textContent.trim();
            if (trans[text]) {
                span.textContent = trans[text];
            }
        } else {
            const text = el.textContent.trim();
            if (trans[text]) {
                el.textContent = trans[text];
            }
        }
    });
    
    // Translate labels
    document.querySelectorAll('label').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate placeholders
    document.querySelectorAll('input[placeholder], textarea[placeholder]').forEach(el => {
        const placeholder = el.getAttribute('placeholder');
        if (trans[placeholder]) {
            el.setAttribute('placeholder', trans[placeholder]);
        }
    });
    
    // Translate setting items
    document.querySelectorAll('.setting-info h3, .setting-info p').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate theme options
    document.querySelectorAll('.theme-option span').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate filter buttons
    document.querySelectorAll('.filter-btn').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate tab buttons
    document.querySelectorAll('.tab-btn span, .settings-nav-item span').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate empty states
    document.querySelectorAll('.empty-state h3, .empty-state p, .empty-notifications h3, .empty-notifications p, .empty-conversations h3, .empty-conversations p, .chat-empty-state h3, .chat-empty-state p').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate notification text (but not actor names)
    document.querySelectorAll('.notification-text').forEach(el => {
        const actorEl = el.querySelector('.notification-actor');
        if (actorEl) {
            const actorName = actorEl.textContent;
            const fullText = el.textContent.trim();
            const actionText = fullText.replace(actorName, '').trim();
            if (trans[actionText]) {
                el.innerHTML = `<span class="notification-actor">${actorName}</span> ${trans[actionText]}`;
            }
        }
    });
    
    // Translate action buttons in posts
    document.querySelectorAll('.action-btn span, .engagement-btn span').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate dropdown menu items
    document.querySelectorAll('.dropdown-menu button').forEach(el => {
        const icon = el.querySelector('i');
        const text = el.textContent.trim();
        if (trans[text] && icon) {
            el.innerHTML = '';
            el.appendChild(icon);
            el.appendChild(document.createTextNode(' ' + trans[text]));
        } else if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate form hints
    document.querySelectorAll('.form-hint').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate danger zone
    document.querySelectorAll('.danger-zone h3, .danger-zone p').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate section descriptions
    document.querySelectorAll('.section-description').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate report options
    document.querySelectorAll('.report-option span').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
    
    // Translate logo text
    document.querySelectorAll('.logo span').forEach(el => {
        const text = el.textContent.trim();
        if (trans[text]) {
            el.textContent = trans[text];
        }
    });
}

// Initialize translations on page load
function initTranslations() {
    const savedLang = localStorage.getItem('preferredLanguage');
    if (savedLang && savedLang !== 'en') {
        // Small delay to ensure DOM is fully loaded
        setTimeout(() => applyTranslations(savedLang), 50);
    }
}

// Run on DOM ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initTranslations);
} else {
    initTranslations();
}

// Export for use in other scripts
window.CommunityTranslations = CommunityTranslations;
window.applyTranslations = applyTranslations;
